<section id="widget-grid" class="">
	<div class="row">
		<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			<div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false" data-widget-deletebutton="false">
				<header>
					<h2>路由策略添加</h2>
				</header>
				<div>
					<div class="jarviswidget-editbox"></div>
					<div class="widget-body">
						<div class="row">
							<form id="routeForm" novalidate="novalidate" class="form-horizontal">
								<div id="routeWizard" class="col-sm-12">
									<div class="form-bootstrapWizard">
										<ul class="bootstrapWizard form-wizard">
											<li class="active" data-target="#step1">
												<a href="#tab1" data-toggle="tab">
													<span class="step">1</span>
													<span class="title">基础配置</span>
												</a>
											</li>
											<li data-target="#step2">
												<a href="#tab2" data-toggle="tab">
													<span class="step">2</span>
													<span class="title">Spring Cloud服务发现</span>
												</a>
											</li>
											<li data-target="#step3">
												<a href="#tab3" data-toggle="tab">
													<span class="step">3</span>
													<span class="title">RPC 服务发现</span>
												</a>
											</li>
											<li data-target="#step4">
												<a href="#tab4" data-toggle="tab">
													<span class="step">4</span>
													<span class="title">gRPC服务发现</span>
												</a>
											</li>
											<li data-target="#step5">
												<a href="#tab5" data-toggle="tab">
													<span class="step">5</span>
													<span class="title">DUBBO服务发现</span>
												</a>
											</li>
										</ul>
										<div class="clearfix"></div>
									</div>
									<div class="tab-content">
										<div class="tab-pane active" id="tab1">
											<br>
											<h3>
												<strong>Step 1 </strong>
												- 路由基本配置
											</h3>
											<div class="row">
												<fieldset>
													<div class="form-group">
														<label class="col-md-2 control-label">API名称</label>
														<div class="col-md-8">
															<input class="form-control" type="text" name="name" id="name">
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-2 control-label">请求路径</label>
														<div class="col-md-8">
															<input class="form-control" placeholder="请求路径" type="text" name="url" id="url">
															<p class="note">
																<strong>Note:</strong>
																以"/"开头，暴露的Restful的API请求路径
															</p>
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-2 control-label">所属分组</label>
														<div class="col-md-8">
															<select id="apiGroup" name="apiGroup" class="form-control">
																<option th:each="apiGroup:${apiGroups}" th:value="${apiGroup.id}" th:text="${apiGroup.name}" th:attr="data-host=${#strings.append(apiGroup.backendHost,':'+apiGroup.backendPort)}" th:attrappend="data-backendPath=${apiGroup.backendPath}" />
															</select>
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-2 control-label">路由类型</label>
														<div class="col-md-8">
															<select id="routeType" name="routeType" class="form-control">
																<option value="0">直接路由</option>
																<option value="1">RPC服务发现</option>
																<option value="2">Spring Cloud服务发现</option>
															</select>
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-2 control-label">目标地址</label>
														<div class="col-md-8">
															<input class="form-control" id="backendHostAndPort" placeholder="目标地址" type="text" readonly>
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-2 control-label">分组路径</label>
														<div class="col-md-8">
															<input class="form-control" id="backendPath" placeholder="分组路径" type="text" readonly>
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-2 control-label">目标路径</label>
														<div class="col-md-8">
															<input class="form-control" placeholder="目标路径" type="text" name="path" id="path">
															<p class="note">
																<strong>Note:</strong>
																分组路径为:/group;目标路径为:/api;后端路径则为:/group/api
															</p>
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-2 control-label">API描述</label>
														<div class="col-md-8">
															<textarea class="form-control" placeholder="描述" rows="4" id="describe" name="describe"></textarea>
														</div>
													</div>
												</fieldset>
											</div>
										</div>
										<div class="tab-pane" id="tab2">
											<br>
											<h3>
												<strong>Step 2</strong>
												- Spring Cloud服务发现
											</h3>
											<div class="row">
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-3 control-label" for="serviceId">服务ID</label>
														<div class="col-sm-6">
															<input class="form-control" id="serviceId" name="serviceId" type="text" placeholder="SpringCloud服务ID" />
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="tab-pane" id="tab3">
											<br>
											<h3>
												<strong>Step 3</strong>
												- RPC 服务发现
											</h3>
											<div class="row">
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-3 control-label" for="serviceName">服务名</label>
														<div class="col-sm-6">
															<input class="form-control" id="serviceName" name="serviceName" type="text" placeholder="服务接口名" />
														</div>
													</div>
												</div>
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-3 control-label" for="methodName">方法名</label>
														<div class="col-sm-6">
															<input class="form-control" id="methodName" name="methodName" type="text" placeholder="服务方法名" />
														</div>
													</div>
												</div>
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-3 control-label" for="serviceGroup">组别</label>
														<div class="col-sm-6">
															<input class="form-control" id="serviceGroup" name="serviceGroup" type="text" placeholder="服务Group" />
														</div>
													</div>
												</div>
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-3 control-label" for="serviceVersion">版本</label>
														<div class="col-sm-6">
															<input class="form-control" id="serviceVersion" name="serviceVersion" type="text" placeholder="服务Version" />
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="tab-pane" id="tab4">
											<br>
											<h3>
												<strong>Step 4</strong>
												- gRPC 服务发现
											</h3>
											<div class="row">
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-3 control-label" for="zipFile">gRPC Proto定义</label>
														<div class="col-sm-8">
															<span id="zipfilename" style="vertical-align: left">未上传文件</span>
															<div class="file-container" style="display: inline-block; position: relative; overflow: hidden; vertical-align: middle">
																<button class="btn btn-success fileinput-button" type="button">上传</button>
																<input type="file" id="zipFile" name="zipFile" onchange="loadZipFile(this.files[0])" style="position: absolute; top: 0; left: 0; font-size: 34px; opacity: 0">
															</div>
															<span>(包括服务定义、入参、出参的proto文件,以zip包的方式提交)</span>
														</div>
													</div>
												</div>
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-3 control-label" for="serviceFileName">服务文件名</label>
														<div class="col-sm-6">
															<input class="form-control" id="serviceFileName" name="serviceFileName" type="text" placeholder="指定gRpc的服务定义文件名" />
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="tab-pane" id="tab5">
											<br>
											<h3>
												<strong>Step 5</strong>
												- DUBBO 服务发现
											</h3>
											<div class="row">
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-3 control-label" for="inputParam">dubbo入参类名</label>
														<div class="col-sm-6">
															<input class="form-control" id="inputParam" name="inputParam" type="text" placeholder="dubbo入参全类名" />
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="form-actions">
											<div class="row">
												<div class="col-sm-12">
													<ul class="pager wizard no-margin">
														<li class="previous disabled">
															<a href="javascript:void(0);" class="btn btn-lg btn-default"> 上一步 </a>
														</li>
														<li class="next">
															<a href="javascript:void(0);" class="btn btn-lg txt-color-darken"> 下一步 </a>
														</li>
														<li class="finish pull-right">
															<a href="javascript:void(0);" class="btn btn-lg txt-color-darken"> 提交 </a>
														</li>
														<li class="pull-center">
															<a href="javascript:void(0);" onclick="goback()" class="btn btn-lg txt-color-darken"> 返回 </a>
														</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</article>
	</div>
</section>
<script type="text/javascript" src="/js/appjs/gateway/api/add.js"></script>
<script type="text/javascript">
  function loadZipFile(file) {
    $("#zipfilename").html(file.name);
  }
  function goback() {
    loadURL("filter/route", $('#content'));
  }
</script>
